#!/usr/bin/env php
<?php

define('ENVIRONMENT', getenv('ENVIRONMENT') ?: 'production');

switch (true) {
    case isset($_composer_autoload_path):
        $autoload = $_composer_autoload_path;
        break;

    case file_exists(__DIR__ . '/../vendor/autoload.php'):
        $autoload = __DIR__ . '/../vendor/autoload.php';
        break;

    default:
        $autoload = __DIR__ . '/../../vendor/autoload.php';
        break;
}

require_once $autoload;

$app = (new \Haemanthus\CodeIgniter3IdeHelper\Application());

if (strtolower(ENVIRONMENT) === 'development') {
    $app->registerDevTools();
}

$app->registerCommands()->run();
